var Q = require('q'),
    requireall = require('requireall');

var artifact = module.exports = {
    register: function(name, cb) {
        if (this.cmds[name]) {
            throw 'Unable to register cmd [' + name + ']';
        }
        this.cmds[name] = cb;
    },
    execute: function(name, options) {
        if (this.cmds[name]) {
            return this.cmds[name](options);
        }
        return Q.reject('Unable to execute "' + name + '" command.');
    },
    cmds: {}
};

requireall('./cmds/*.js', {
    cwd: __dirname
}).forEach(function(func) {
    func(artifact);
});
