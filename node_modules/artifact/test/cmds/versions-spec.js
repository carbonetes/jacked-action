var chai = require('chai'),
    sinon = require("sinon"),
    sinonChai = require("sinon-chai"),
    expect = chai.expect;

var artifact, endpoint;

describe('lib/cmds/versions.js', function() {

    before(function() {
        artifact = require('../../lib/artifact');
        endpoint = require('../../lib/endpoint');
        chai.use(sinonChai);
    });

    after(function() {
        endpoint.get.restore();
    });

    it('Registers versions task to artifact', function() {
        expect(artifact.cmds).to.have.property('resolve');
    });

    it('Calls endpoint.get() when versions is invoked', function() {
        var spy = sinon.spy(endpoint, 'get');
        var options = {
            name: 'test'
        };
        artifact.cmds.versions(options);
        expect(spy).to.have.been.calledWithExactly(["test"]);
    });

});