var chai = require('chai'),
    sinon = require("sinon"),
    sinonChai = require("sinon-chai"),
    expect = chai.expect;

var artifact, endpoint;

describe('lib/cmds/load.js', function() {

    before(function() {
        artifact = require('../../lib/artifact');
        endpoint = require('../../lib/endpoint');
        chai.use(sinonChai);
    });

    after(function() {
        endpoint.get.restore();
    });

    it('Registers load task to artifact', function() {
        expect(artifact.cmds).to.have.property('load');
    });

    it('Calls endpoint.get() when load is invoked', function() {
        var spy = sinon.spy(endpoint, 'get');
        var options = {
            name: 'test',
            version: 'test'
        };
        artifact.cmds.load(options);
        expect(spy).to.have.been.calledWithExactly(["test", "test"]);
    });

});
